{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","update","id","object","put","concat","deleteEntry","delete","Notification","_ref","message","error","react_default","a","createElement","className","AddNewForm","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addName","event","preventDefault","personsArray","state","personObject","name","newName","number","newNumber","filter","person","toLowerCase","length","personService","formFunction","setState","catch","errorFunc","window","confirm","address","find","changedAddress","objectSpread","changedArray","map","handleNameChange","target","value","handleNumberChange","bind","assertThisInitialized","onSubmit","onChange","type","React","Component","Address","onClick","removeFunction","AddressList","addresses","App_Address","key","App","_this2","handleFilterChange","handlePersonsChange","notification","setTimeout","handlePersonRemoval","displayError","_this3","_this4","addressesToShow","includes","App_Notification","App_AddNewForm","App_AddressList","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.cdf7ec1c.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, object) => {\r\n  return axios.put(`${baseUrl}/${id}`, object)\r\n}\r\n\r\nconst deleteEntry = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, deleteEntry }\r\n","import React from 'react'\nimport personService from './services/persons'\n\nconst Notification = ({message, error}) => {\n  if (message === null){\n    return null;\n  }\n\n  if (error){\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\nclass AddNewForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      newName: '',\n      newNumber: '',\n    }\n\n    this.handleNameChange = this.handleNameChange.bind(this)\n    this.handleNumberChange = this.handleNumberChange.bind(this)\n    this.addName = this.addName.bind(this)\n  }\n\n  addName = (event) => {\n    event.preventDefault()\n    let personsArray = []\n    personsArray = this.props.state.persons\n    const personObject = {\n      name: this.state.newName,\n      number: this.state.newNumber\n    }\n\n    if (this.props.state.persons.filter(person =>\n      person.name.toLowerCase() === this.state.newName.toLowerCase()).length === 0){\n        personService\n          .create(personObject)\n          .then(response => {\n            personsArray = this.props.state.persons.concat(response.data)\n            const message = `lisättiin ${personObject.name}`\n            this.props.formFunction(personsArray, message)\n            this.setState({newName: '', newNumber: ''})\n          })\n          .catch(error => {\n            const message = `osoitteen ${personObject.name} luomisessa\n            tapahtui virhe`\n            this.props.errorFunc(message)\n      })\n    } else {\n      const result = window.confirm(`${this.state.newName} on jo luettelossa,\n        korvataanko vanha numero uudella?`)\n\n      if (result) {\n        const address = this.props.state.persons.find(person =>\n          person.name.toLowerCase() === this.state.newName.toLowerCase())\n        const changedAddress = {...address, number: this.state.newNumber}\n\n        personService\n          .update(address.id, changedAddress)\n          .then(response => {\n            const changedArray = this.props.state.persons.map(person =>\n              person.id !== address.id ? person : changedAddress)\n            const message = `muokattiin ${changedAddress.name}`\n            this.props.formFunction(changedArray, message)\n            this.setState({newName: '', newNumber: ''})\n          })\n          .catch(error => {\n            const message = `osoitetta ${changedAddress.name} ei löytynyt\n                              palvelimelta, luodaan uusi`\n            personService\n              .create(changedAddress)\n              .then(response => {\n                personsArray = this.props.state.persons.filter((person) =>\n                person.name.toLowerCase() !== changedAddress.name.toLowerCase())\n\n                personsArray = personsArray.concat(response.data)\n                this.props.formFunction(personsArray, message)\n                this.setState({newName: '', newNumber: ''})\n              })\n              .catch(error => {\n                const message = `osoitteen ${personObject.name} luomisessa\n                tapahtui virhe`\n                this.props.errorFunc(message)\n              })\n          })\n      }\n    }\n  }\n\n  handleNameChange = (event) => {\n    this.setState({ newName: event.target.value })\n  }\n\n  handleNumberChange = (event) => {\n    this.setState({ newNumber: event.target.value })\n  }\n\n  render () {\n    return (\n      <form onSubmit={this.addName}>\n        <h2>Lisää uusi / muuta olemassaolevan numeroa</h2>\n        <div>\n          nimi: <input value={this.state.newName}\n                        onChange={this.handleNameChange} />\n        </div>\n        <div>\n          numero: <input value={this.state.newNumber}\n                          onChange={this.handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">lisää</button>\n        </div>\n      </form>\n    )\n  }\n}\n\nconst Address = (props) => {\n  return (\n    <tr>\n      <td>{props.name}</td>\n      <td>{props.number}</td>\n      <td>\n        <button onClick={props.removeFunction}>\n          poista\n        </button>\n      </td>\n    </tr>\n  )\n}\n\nconst AddressList = (props) => {\n  const removeFunc = (id, name) => {\n    return () => {\n      const result = window.confirm(`poistetaanko ${name}`)\n      if (result){\n        personService\n          .deleteEntry(id)\n          .then(response => {\n            personService\n              .getAll()\n              .then(response => {\n                const message = `poistettiin ${name}`\n                props.update(response.data, message)\n            })\n            .catch(error => {\n              const message = `palvelimeen ei saada yhteyttä`\n              props.errorFunc(message)\n            })\n        })\n        .catch(error => {\n          const message = `osoitetta ${name} ei löytynyt palvelimelta`\n          props.errorFunc(message)\n        })\n      }\n    }\n  }\n\n  return (\n    <div>\n      <h2>Numerot</h2>\n      <table>\n        <tbody>\n        {props.addresses.map(person => <Address key={person.name}\n          name={person.name} number={person.number}\n          removeFunction={removeFunc(person.id, person.name)}/>)}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      filter: '',\n      notification: null,\n      error: false\n    }\n\n    this.handlePersonsChange = this.handlePersonsChange.bind(this)\n  }\n\n  handleFilterChange = (event) => {\n    this.setState({ filter: event.target.value })\n  }\n\n  handlePersonsChange = (value, message) => {\n    this.setState({persons: value, notification: message})\n    setTimeout(() => {\n      this.setState({notification: null})\n    }, 5000)\n  }\n\n  handlePersonRemoval = (value, message) => {\n    this.setState({persons: value, notification: message})\n    setTimeout(() => {\n      this.setState({notification: null})\n    }, 5000)\n  }\n\n  displayError = (message) => {\n    this.setState({notification: message, error: true})\n    setTimeout(() => {\n      this.setState({notification: null, error: false})\n    }, 5000)\n  }\n\n  componentDidMount() {\n    personService\n      .getAll()\n      .then(response => {\n        const persons = response.data\n        this.setState({ persons: persons })\n      })\n  }\n\n  render() {\n    const addressesToShow = this.state.persons.filter(person =>\n          person.name.toLowerCase().includes(this.state.filter.toLowerCase()))\n\n    return (\n      <div>\n        <div>\n          <h2>Puhelinluettelo</h2>\n          <Notification message={this.state.notification}\n                        error={this.state.error}/>\n        </div>\n        <div>\n          rajaa näytettäviä: <input value={this.state.filter}\n                                    onChange={this.handleFilterChange} />\n        </div>\n        <AddNewForm state={this.state} formFunction={this.handlePersonsChange}\n                    errorFunc={this.displayError}/>\n        <AddressList addresses={addressesToShow} state={this.state}\n          update={this.handlePersonRemoval} errorFunc={this.displayError}/>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}