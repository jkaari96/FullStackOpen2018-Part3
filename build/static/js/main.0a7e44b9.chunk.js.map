{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","create","newObject","post","update","id","object","put","concat","deleteEntry","delete","Notification","_ref","message","error","react_default","a","createElement","className","AddNewForm","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addName","event","preventDefault","personsArray","state","personObject","name","newName","number","newNumber","find","person","toLowerCase","window","confirm","address","changedAddress","objectSpread","personService","then","response","changedArray","map","data","formFunction","setState","catch","filter","errorFunc","handleNameChange","target","value","handleNumberChange","bind","assertThisInitialized","onSubmit","onChange","type","React","Component","Address","onClick","removeFunction","AddressList","addresses","App_Address","key","App","_this2","handleFilterChange","handlePersonsChange","notification","setTimeout","handlePersonRemoval","displayError","_this3","_this4","addressesToShow","includes","App_Notification","App_AddNewForm","App_AddressList","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0a7e44b9.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, object) => {\r\n  return axios.put(`${baseUrl}/${id}`, object)\r\n}\r\n\r\nconst deleteEntry = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, deleteEntry }\r\n","import React from 'react'\nimport personService from './services/persons'\n\nconst Notification = ({message, error}) => {\n  if (message === null){\n    return null;\n  }\n\n  if (error){\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\nclass AddNewForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      newName: '',\n      newNumber: '',\n    }\n\n    this.handleNameChange = this.handleNameChange.bind(this)\n    this.handleNumberChange = this.handleNumberChange.bind(this)\n    this.addName = this.addName.bind(this)\n  }\n\n  addName = (event) => {\n    event.preventDefault()\n    let personsArray = []\n    personsArray = this.props.state.persons\n    const personObject = {\n      name: this.state.newName,\n      number: this.state.newNumber\n    }\n\n    if (!this.props.state.persons.find(person =>\n      person.name.toLowerCase() === this.state.newName.toLowerCase())){\n        personService\n          .create(personObject)\n          .then(response => {\n            personsArray = this.props.state.persons.concat(response.data)\n            const message = `lisättiin ${personObject.name}`\n            this.props.formFunction(personsArray, message)\n            this.setState({newName: '', newNumber: ''})\n          })\n          .catch(error => {\n            const message = `osoitteen ${personObject.name} luomisessa\n            tapahtui virhe`\n            this.props.errorFunc(message)\n      })\n    } else {\n      const result = window.confirm(`${this.state.newName} on jo luettelossa,\n        korvataanko vanha numero uudella?`)\n\n      if (result) {\n        const address = this.props.state.persons.find(person =>\n          person.name.toLowerCase() === this.state.newName.toLowerCase())\n        const changedAddress = {...address, number: this.state.newNumber}\n\n        personService\n          .update(address.id, changedAddress)\n          .then(response => {\n            const changedArray = this.props.state.persons.map(person =>\n              person.id !== address.id ? person : response.data)\n            const message = `muokattiin ${changedAddress.name}`\n            this.props.formFunction(changedArray, message)\n            this.setState({newName: '', newNumber: ''})\n          })\n          .catch(error => {\n            const message = `osoitetta ${changedAddress.name} ei löytynyt\n                              palvelimelta, luodaan uusi`\n            personService\n              .create(changedAddress)\n              .then(response => {\n                personsArray = this.props.state.persons.filter((person) =>\n                person.name.toLowerCase() !== changedAddress.name.toLowerCase())\n\n                personsArray = personsArray.concat(response.data)\n                this.props.formFunction(personsArray, message)\n                this.setState({newName: '', newNumber: ''})\n              })\n              .catch(error => {\n                const message = `osoitteen ${personObject.name} luomisessa\n                tapahtui virhe`\n                this.props.errorFunc(message)\n              })\n          })\n      }\n    }\n  }\n\n  handleNameChange = (event) => {\n    this.setState({ newName: event.target.value })\n  }\n\n  handleNumberChange = (event) => {\n    this.setState({ newNumber: event.target.value })\n  }\n\n  render () {\n    return (\n      <form onSubmit={this.addName}>\n        <h2>Lisää uusi / muuta olemassaolevan numeroa</h2>\n        <div>\n          nimi: <input value={this.state.newName}\n                        onChange={this.handleNameChange} />\n        </div>\n        <div>\n          numero: <input value={this.state.newNumber}\n                          onChange={this.handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">lisää</button>\n        </div>\n      </form>\n    )\n  }\n}\n\nconst Address = (props) => {\n  return (\n    <tr>\n      <td>{props.name}</td>\n      <td>{props.number}</td>\n      <td>\n        <button onClick={props.removeFunction}>\n          poista\n        </button>\n      </td>\n    </tr>\n  )\n}\n\nconst AddressList = (props) => {\n  const removeFunc = (id, name) => {\n    return () => {\n      const result = window.confirm(`poistetaanko ${name}`)\n      if (result){\n        personService\n          .deleteEntry(id)\n          .then(response => {\n            personService\n              .getAll()\n              .then(response => {\n                const message = `poistettiin ${name}`\n                props.update(response.data, message)\n            })\n            .catch(error => {\n              const message = `palvelimeen ei saada yhteyttä`\n              props.errorFunc(message)\n            })\n        })\n        .catch(error => {\n          const message = `osoitetta ${name} ei löytynyt palvelimelta`\n          props.errorFunc(message)\n        })\n      }\n    }\n  }\n\n  return (\n    <div>\n      <h2>Numerot</h2>\n      <table>\n        <tbody>\n        {props.addresses.map(person => <Address key={person.name}\n          name={person.name} number={person.number}\n          removeFunction={removeFunc(person.id, person.name)}/>)}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      filter: '',\n      notification: null,\n      error: false\n    }\n\n    this.handlePersonsChange = this.handlePersonsChange.bind(this)\n  }\n\n  handleFilterChange = (event) => {\n    this.setState({ filter: event.target.value })\n  }\n\n  handlePersonsChange = (value, message) => {\n    this.setState({persons: value, notification: message})\n    setTimeout(() => {\n      this.setState({notification: null})\n    }, 5000)\n  }\n\n  handlePersonRemoval = (value, message) => {\n    this.setState({persons: value, notification: message})\n    setTimeout(() => {\n      this.setState({notification: null})\n    }, 5000)\n  }\n\n  displayError = (message) => {\n    this.setState({notification: message, error: true})\n    setTimeout(() => {\n      this.setState({notification: null, error: false})\n    }, 5000)\n  }\n\n  componentDidMount() {\n    personService\n      .getAll()\n      .then(response => {\n        const persons = response.data\n        this.setState({ persons: persons })\n      })\n  }\n\n  render() {\n    const addressesToShow = this.state.persons.filter(person =>\n          person.name.toLowerCase().includes(this.state.filter.toLowerCase()))\n\n    return (\n      <div>\n        <div>\n          <h2>Puhelinluettelo</h2>\n          <Notification message={this.state.notification}\n                        error={this.state.error}/>\n        </div>\n        <div>\n          rajaa näytettäviä: <input value={this.state.filter}\n                                    onChange={this.handleFilterChange} />\n        </div>\n        <AddNewForm state={this.state} formFunction={this.handlePersonsChange}\n                    errorFunc={this.displayError}/>\n        <AddressList addresses={addressesToShow} state={this.state}\n          update={this.handlePersonRemoval} errorFunc={this.displayError}/>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}