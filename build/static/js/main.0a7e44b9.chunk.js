(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(44)},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),c=n(17),s=n(5),u=n(6),l=n(9),m=n(7),d=n(8),h=n(2),f=n(3),p=n.n(f),v="/api/persons",b={getAll:function(){return p.a.get(v)},create:function(e){return p.a.post(v,e)},update:function(e,t){return p.a.put("".concat(v,"/").concat(e),t)},deleteEntry:function(e){return p.a.delete("".concat(v,"/").concat(e))}},w=function(e){var t=e.message,n=e.error;return null===t?null:n?r.a.createElement("div",{className:"error"},t):r.a.createElement("div",{className:"notification"},t)},E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).addName=function(e){e.preventDefault();var t=[];t=n.props.state.persons;var a={name:n.state.newName,number:n.state.newNumber};if(n.props.state.persons.find(function(e){return e.name.toLowerCase()===n.state.newName.toLowerCase()})){if(window.confirm("".concat(n.state.newName," on jo luettelossa,\n        korvataanko vanha numero uudella?"))){var r=n.props.state.persons.find(function(e){return e.name.toLowerCase()===n.state.newName.toLowerCase()}),o=Object(c.a)({},r,{number:n.state.newNumber});b.update(r.id,o).then(function(e){var t=n.props.state.persons.map(function(t){return t.id!==r.id?t:e.data}),a="muokattiin ".concat(o.name);n.props.formFunction(t,a),n.setState({newName:"",newNumber:""})}).catch(function(e){var r="osoitetta ".concat(o.name," ei l\xf6ytynyt\n                              palvelimelta, luodaan uusi");b.create(o).then(function(e){t=(t=n.props.state.persons.filter(function(e){return e.name.toLowerCase()!==o.name.toLowerCase()})).concat(e.data),n.props.formFunction(t,r),n.setState({newName:"",newNumber:""})}).catch(function(e){var t="osoitteen ".concat(a.name," luomisessa\n                tapahtui virhe");n.props.errorFunc(t)})})}}else b.create(a).then(function(e){t=n.props.state.persons.concat(e.data);var r="lis\xe4ttiin ".concat(a.name);n.props.formFunction(t,r),n.setState({newName:"",newNumber:""})}).catch(function(e){var t="osoitteen ".concat(a.name," luomisessa\n            tapahtui virhe");n.props.errorFunc(t)})},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.state={newName:"",newNumber:""},n.handleNameChange=n.handleNameChange.bind(Object(h.a)(Object(h.a)(n))),n.handleNumberChange=n.handleNumberChange.bind(Object(h.a)(Object(h.a)(n))),n.addName=n.addName.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.addName},r.a.createElement("h2",null,"Lis\xe4\xe4 uusi / muuta olemassaolevan numeroa"),r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))}}]),t}(r.a.Component),N=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:e.removeFunction},"poista")))},C=function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Numerot"),r.a.createElement("table",null,r.a.createElement("tbody",null,e.addresses.map(function(t){return r.a.createElement(N,{key:t.name,name:t.name,number:t.number,removeFunction:(n=t.id,a=t.name,function(){window.confirm("poistetaanko ".concat(a))&&b.deleteEntry(n).then(function(t){b.getAll().then(function(t){var n="poistettiin ".concat(a);e.update(t.data,n)}).catch(function(t){e.errorFunc("palvelimeen ei saada yhteytt\xe4")})}).catch(function(t){var n="osoitetta ".concat(a," ei l\xf6ytynyt palvelimelta");e.errorFunc(n)})})});var n,a}))))},g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleFilterChange=function(e){n.setState({filter:e.target.value})},n.handlePersonsChange=function(e,t){n.setState({persons:e,notification:t}),setTimeout(function(){n.setState({notification:null})},5e3)},n.handlePersonRemoval=function(e,t){n.setState({persons:e,notification:t}),setTimeout(function(){n.setState({notification:null})},5e3)},n.displayError=function(e){n.setState({notification:e,error:!0}),setTimeout(function(){n.setState({notification:null,error:!1})},5e3)},n.state={persons:[],filter:"",notification:null,error:!1},n.handlePersonsChange=n.handlePersonsChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.getAll().then(function(t){var n=t.data;e.setState({persons:n})})}},{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(w,{message:this.state.notification,error:this.state.error})),r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{value:this.state.filter,onChange:this.handleFilterChange})),r.a.createElement(E,{state:this.state,formFunction:this.handlePersonsChange,errorFunc:this.displayError}),r.a.createElement(C,{addresses:t,state:this.state,update:this.handlePersonRemoval,errorFunc:this.displayError}))}}]),t}(r.a.Component);n(42);i.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.0a7e44b9.chunk.js.map