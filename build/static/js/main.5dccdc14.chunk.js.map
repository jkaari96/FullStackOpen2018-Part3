{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","create","newObject","post","update","id","object","put","concat","deleteEntry","delete","Notification","_ref","message","error","react_default","a","createElement","className","AddNewForm","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addName","event","preventDefault","personsArray","state","personObject","name","newName","number","newNumber","filter","person","toLowerCase","length","personService","then","response","data","formFunction","setState","catch","errorFunc","window","confirm","address","find","changedAddress","objectSpread","changedArray","map","handleNameChange","target","value","handleNumberChange","bind","assertThisInitialized","onSubmit","onChange","type","React","Component","Address","onClick","removeFunction","AddressList","addresses","App_Address","key","App","_this2","handleFilterChange","handlePersonsChange","notification","setTimeout","handlePersonRemoval","displayError","_this3","_this4","addressesToShow","includes","App_Notification","App_AddNewForm","App_AddressList","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.5dccdc14.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, object) => {\r\n  return axios.put(`${baseUrl}/${id}`, object)\r\n}\r\n\r\nconst deleteEntry = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, deleteEntry }\r\n","import React from 'react'\nimport personService from './services/persons'\n\nconst Notification = ({message, error}) => {\n  if (message === null){\n    return null;\n  }\n\n  if (error){\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\nclass AddNewForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      newName: '',\n      newNumber: '',\n    }\n\n    this.handleNameChange = this.handleNameChange.bind(this)\n    this.handleNumberChange = this.handleNumberChange.bind(this)\n    this.addName = this.addName.bind(this)\n  }\n\n  addName = (event) => {\n    event.preventDefault()\n    let personsArray = []\n    personsArray = this.props.state.persons\n    const personObject = {\n      name: this.state.newName,\n      number: this.state.newNumber\n    }\n\n    if (this.props.state.persons.filter(person =>\n      person.name.toLowerCase() === this.state.newName.toLowerCase()).length === 0){\n        personService\n          .create(personObject)\n          .then(response => {\n            personsArray = this.props.state.persons.concat(response.data)\n            const message = `lisättiin ${personObject.name}`\n            this.props.formFunction(personsArray, message)\n            this.setState({newName: '', newNumber: ''})\n          })\n          .catch(error => {\n            const message = `osoitteen ${personObject.name} luomisessa\n            tapahtui virhe`\n            this.props.errorFunc(message)\n      })\n    } else {\n      const result = window.confirm(`${this.state.newName} on jo luettelossa,\n        korvataanko vanha numero uudella?`)\n\n      if (result) {\n        const address = this.props.state.persons.find(person =>\n          person.name.toLowerCase() === this.state.newName.toLowerCase())\n        const changedAddress = {...address, number: this.state.newNumber}\n\n        personService\n          .update(address.id, changedAddress)\n          .then(response => {\n            const changedArray = this.props.state.persons.map(person =>\n              person.id !== address.id ? person : changedAddress)\n            const message = `muokattiin ${changedAddress.name}`\n            this.props.formFunction(changedArray, message)\n            this.setState({newName: '', newNumber: ''})\n          })\n          .catch(error => {\n            const message = `osoitetta ${changedAddress.name} ei löytynyt\n                              palvelimelta, luodaan uusi`\n            personService\n              .create(changedAddress)\n              .then(response => {\n                personsArray = this.props.state.persons.filter((person) =>\n                person.name.toLowerCase() !== changedAddress.name.toLowerCase())\n\n                personsArray = personsArray.concat(response.data)\n                this.props.formFunction(personsArray, message)\n                this.setState({newName: '', newNumber: ''})\n              })\n              .catch(error => {\n                const message = `osoitteen ${personObject.name} luomisessa\n                tapahtui virhe`\n                this.props.errorFunc(message)\n              })\n          })\n      }\n    }\n  }\n\n  handleNameChange = (event) => {\n    this.setState({ newName: event.target.value })\n  }\n\n  handleNumberChange = (event) => {\n    this.setState({ newNumber: event.target.value })\n  }\n\n  render () {\n    return (\n      <form onSubmit={this.addName}>\n        <h2>Lisää uusi / muuta olemassaolevan numeroa</h2>\n        <div>\n          nimi: <input value={this.state.newName}\n                        onChange={this.handleNameChange} />\n        </div>\n        <div>\n          numero: <input value={this.state.newNumber}\n                          onChange={this.handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">lisää</button>\n        </div>\n      </form>\n    )\n  }\n}\n\nconst Address = (props) => {\n  return (\n    <tr>\n      <td>{props.name}</td>\n      <td>{props.number}</td>\n      <td>\n        <button onClick={props.removeFunction}>\n          poista\n        </button>\n      </td>\n    </tr>\n  )\n}\n\nconst AddressList = (props) => {\n  const removeFunc = (id, name) => {\n    return () => {\n      const result = window.confirm(`poistetaanko ${name}`)\n      if (result){\n        personService\n          .deleteEntry(id)\n          .then(response => {\n            personService\n              .getAll()\n              .then(response => {\n                const message = `poistettiin ${name}`\n                props.update(response.data, message)\n            })\n            .catch(error => {\n              const message = `palvelimeen ei saada yhteyttä`\n              props.errorFunc(message)\n            })\n        })\n        .catch(error => {\n          const message = `osoitetta ${name} ei löytynyt palvelimelta`\n          props.errorFunc(message)\n        })\n      }\n    }\n  }\n\n  return (\n    <div>\n      <h2>Numerot</h2>\n      <table>\n        <tbody>\n        {props.addresses.map(person => <Address key={person.name}\n          name={person.name} number={person.number}\n          removeFunction={removeFunc(person.id, person.name)}/>)}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      filter: '',\n      notification: null,\n      error: false\n    }\n\n    this.handlePersonsChange = this.handlePersonsChange.bind(this)\n  }\n\n  handleFilterChange = (event) => {\n    this.setState({ filter: event.target.value })\n  }\n\n  handlePersonsChange = (value, message) => {\n    this.setState({persons: value, notification: message})\n    setTimeout(() => {\n      this.setState({notification: null})\n    }, 5000)\n  }\n\n  handlePersonRemoval = (value, message) => {\n    this.setState({persons: value, notification: message})\n    setTimeout(() => {\n      this.setState({notification: null})\n    }, 5000)\n  }\n\n  displayError = (message) => {\n    this.setState({notification: message, error: true})\n    setTimeout(() => {\n      this.setState({notification: null, error: false})\n    }, 5000)\n  }\n\n  componentDidMount() {\n    personService\n      .getAll()\n      .then(response => {\n        const persons = response.data\n        this.setState({ persons: persons })\n      })\n  }\n\n  render() {\n    const addressesToShow = this.state.persons.filter(person =>\n          person.name.toLowerCase().includes(this.state.filter.toLowerCase()))\n\n    return (\n      <div>\n        <div>\n          <h2>Puhelinluettelo</h2>\n          <Notification message={this.state.notification}\n                        error={this.state.error}/>\n        </div>\n        <div>\n          rajaa näytettäviä: <input value={this.state.filter}\n                                    onChange={this.handleFilterChange} />\n        </div>\n        <AddNewForm state={this.state} formFunction={this.handlePersonsChange}\n                    errorFunc={this.displayError}/>\n        <AddressList addresses={addressesToShow} state={this.state}\n          update={this.handlePersonRemoval} errorFunc={this.displayError}/>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}